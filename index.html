<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <title>RPGym</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- Bootstrap -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"
        ></script>

        <!-- Font Awesome -->
        <script
            src="https://kit.fontawesome.com/d1a66f824f.js"
            crossorigin="anonymous"
        ></script>

        <style>
            .progress {
                height: 22px;
            }

            .progress-bar {
                font-weight: bold;
            }

            #view-login h2 {
                letter-spacing: 1px;
            }

            #authCard.register-mode {
                border-top: 3px solid #0d6efd;
                padding-top: 10px;
            }

            #authCard.register-mode h5 {
                color: #0d6efd;
            }
        </style>
    </head>

    <body class="d-flex flex-column min-vh-100">
        <!-- ================= LOGIN ================= -->
        <div
            id="view-login"
            class="d-flex justify-content-center align-items-center vh-100 bg-dark"
        >
            <div class="card p-4" style="max-width: 380px; width: 100%">
                <img
                    src="./assets/RPGym_logo.jpg"
                    class="card-img-top"
                    alt="Logo"
                />

                <!-- LOGIN SOCIAL -->
                <button
                    id="btnGoogleLogin"
                    class="btn btn-secondary w-100 mb-2 mt-2"
                >
                    <i class="fa-brands fa-google me-2"></i>
                    Continuar con Google
                </button>

                <button
                    id="btnFacebookLogin"
                    class="btn btn-primary w-100 mb-3"
                    style="display: none"
                >
                    <i class="fa-brands fa-facebook me-2"></i>
                    Continuar con Facebook
                </button>

                <div class="text-center text-muted mb-3">o</div>

                <!-- FORM EMAIL / PASSWORD -->
                <div id="authCard">
                    <h5 id="authTitle" class="text-center mb-3">
                        Iniciar sesión
                    </h5>

                    <input
                        type="email"
                        id="email"
                        class="form-control mb-2"
                        placeholder="Correo electrónico"
                    />

                    <input
                        type="password"
                        id="password"
                        class="form-control mb-2"
                        placeholder="Contraseña"
                    />

                    <!-- SOLO REGISTRO -->
                    <input
                        type="password"
                        id="passwordConfirm"
                        class="form-control mb-2 d-none"
                        placeholder="Confirmar contraseña"
                    />

                    <button id="btnPrimary" class="btn btn-success w-100 mb-2">
                        Iniciar sesión
                    </button>

                    <button
                        id="btnToggleMode"
                        class="btn btn-link w-100"
                        type="button"
                    >
                        ¿No tienes cuenta? Crear una
                    </button>
                </div>
            </div>
        </div>

        <!-- ================= Navbar ================= -->
        <div id="app-navbar" class="d-none">
            <nav class="navbar navbar-expand-lg bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#" id="navDashboard">RPGym</a>

                    <button
                        class="navbar-toggler"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarTogglerDemo02"
                        aria-controls="navbarTogglerDemo02"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                    >
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div
                        class="collapse navbar-collapse"
                        id="navbarTogglerDemo02"
                    >
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="navAsistencia"
                                    >Asistencia</a
                                >
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="navFuerza"
                                    >Fuerza</a
                                >
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="navPeso"
                                    >Peso</a
                                >
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" id="navPremios"
                                    >Premios</a
                                >
                            </li>
                        </ul>

                        <button class="btn btn-outline-danger" id="btnLogout">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </nav>
        </div>

        <!-- ================= DASHBOARD ================= -->
        <div id="view-dashboard" class="d-none px-2 px-md-5">
            <h4 class="mb-3">
                <i class="fa-solid fa-gauge-high me-2"></i>
                Dashboard
            </h4>

            <div class="row g-3">
                <!-- XP -->
                <div class="col-md-3">
                    <div class="card p-3 text-center">
                        <i class="fa-solid fa-star fa-2x text-warning mb-2"></i>
                        <h6>XP Total</h6>
                        <strong id="dashXP">0</strong>

                        <ul class="mt-2 small">
                            <li>
                                Asistencia: <span id="xpAsistencia">0</span>
                            </li>
                            <li>Fuerza: <span id="xpFuerza">0</span></li>
                            <li>Peso: <span id="xpPeso">0</span></li>
                        </ul>
                    </div>
                </div>

                <!-- Asistencias -->
                <div class="col-md-3">
                    <div class="card p-3 text-center">
                        <i
                            class="fa-solid fa-calendar-check fa-2x text-success mb-2"
                        ></i>
                        <h6>Asistencias</h6>
                        <strong id="dashAsistencias">0</strong>
                    </div>
                </div>

                <!-- Peso inicial -->
                <div class="col-md-3">
                    <div class="card p-3 text-center">
                        <i
                            class="fa-solid fa-flag fa-2x text-secondary mb-2"
                        ></i>
                        <h6>Peso inicial</h6>
                        <strong id="dashPesoInicial">-</strong>
                    </div>
                </div>

                <!-- Peso actual -->
                <div class="col-md-3">
                    <div class="card p-3 text-center">
                        <i
                            class="fa-solid fa-weight-scale fa-2x text-primary mb-2"
                        ></i>
                        <h6>Peso actual</h6>
                        <strong id="dashPesoActual">-</strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- ASISTENCIA -->
        <div id="view-asistencia" class="d-none px-2 px-md-5">
            <div class="card p-3 mb-3" id="card-asistencia">
                <h5 class="mb-3">
                    <i class="fa-solid fa-calendar-check me-2 text-success"></i>
                    Asistencia semanal
                </h5>

                <p class="mb-1">
                    Progreso de misión:
                    <strong id="asistenciaTexto">0 / 5</strong>
                </p>

                <div class="progress mb-3">
                    <div
                        id="asistenciaBar"
                        class="progress-bar bg-success"
                        style="width: 0%"
                    >
                        0%
                    </div>
                </div>

                <button
                    id="btnRegistrarAsistencia"
                    class="btn btn-success w-100"
                >
                    <i class="fa-solid fa-check me-2"></i>
                    Registrar asistencia de hoy
                </button>

                <div
                    id="asistenciaYaRegistrada"
                    class="text-muted text-center d-none mt-2"
                >
                    ✅ Asistencia de hoy ya registrada
                </div>
            </div>
        </div>

        <!-- FUERZA -->
        <div id="view-fuerza" class="d-none px-2 px-md-5">
            <div class="card p-3 mb-3">
                <h5>
                    <i class="fa-solid fa-dumbbell me-2 text-warning"></i>
                    Progreso de Fuerza
                </h5>

                <p class="mb-1">
                    Nivel de fuerza:
                    <strong id="fuerzaNivel">Nivel 1</strong>
                </p>

                <div class="progress">
                    <div
                        id="fuerzaBar"
                        class="progress-bar bg-warning text-dark"
                        style="width: 0%"
                    >
                        0%
                    </div>
                </div>
            </div>
            <div class="card p-3 mb-2">
                <h6 class="mb-2">
                    <i class="fa-solid fa-fire me-2"></i>
                    Press banca
                </h6>

                <p class="mb-1">
                    Peso actual:
                    <strong id="bancaPeso">60 kg</strong>
                </p>

                <div class="d-flex gap-2">
                    <button class="btn btn-sm btn-outline-warning">
                        +2.5 kg
                    </button>
                    <button class="btn btn-sm btn-outline-warning">
                        +5 kg
                    </button>
                </div>
            </div>
        </div>

        <!-- PESO -->
        <div id="view-peso" class="d-none px-2 px-md-5">
            <h4 class="mb-3">
                <i class="fa-solid fa-weight-scale me-2"></i>
                Progreso de Peso
            </h4>

            <!-- Barra RPG -->
            <small class="text-muted"> Progreso hacia tu peso objetivo </small>
            <div class="progress mb-3">
                <div id="weightBar" class="progress-bar" style="width: 0%">
                    0 kg
                </div>
            </div>

            <div class="card p-3 mb-3">
                <label class="form-label">
                    <i class="fa-solid fa-bullseye me-2"></i>
                    Peso objetivo (kg)
                </label>

                <div class="input-group">
                    <input
                        type="number"
                        step="0.1"
                        id="pesoObjetivoInput"
                        class="form-control"
                        placeholder="Ej. 80"
                    />
                    <button
                        class="btn btn-outline-primary"
                        id="btnGuardarPesoObjetivo"
                    >
                        Guardar
                    </button>
                </div>
            </div>

            <button class="btn btn-primary w-100 mb-3" id="btnRegistrarPeso">
                <i class="fa-solid fa-plus me-2"></i>
                Registrar peso
            </button>

            <!-- Historial -->
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Peso (kg)</th>
                        <th class="text-end">Acciones</th>
                    </tr>
                </thead>
                <tbody id="weightTable"></tbody>
            </table>
        </div>
        <script type="module" src="js/firebase.js"></script>
        <script type="module" src="js/auth.js"></script>
        <script type="module" src="js/base.js"></script>
        <script type="module" src="js/asistencia.js"></script>
        <script type="module" src="js/fuerza.js"></script>
        <script type="module" src="js/peso.js"></script>
    </body>
</html>
